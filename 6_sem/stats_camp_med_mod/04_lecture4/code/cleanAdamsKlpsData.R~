### Title:    Missing Data Course: Example Data Prep
### Author:   Kyle M. Lang
### Created:  2015-OCT-04
### Modified: 2015-OCT-13

rm(list = ls(all = TRUE))

set.seed(235711)

source("lecture7SupportFunctions.R")

## Read the data:
tmp <- readLines("adamsklps_sem_data.txt", -1)
tmp2 <- strsplit(tmp, "\t")
dat1 <- do.call("rbind", lapply(tmp2[-1], function(x) {x[1 : 33]}))
dat1 <- apply(dat1, 2, as.numeric)
colnames(dat1) <- tmp2[[1]][1 : 33]

parms <- list()
parms$pm <- 0.3
parms$auxVar <- "POLV"
parms$incompVars <- colnames(dat1)[-ncol(dat1)]
parms$marType <- rep(c("lower", "center"), (ncol(dat1) - 1) / 2)

## Impose missing
missData <- imposeMissing(dat1, parms)

## Save the data:
saveRDS(dat1, "adamsKlpsData.rds")
saveRDS(missData, "adamsKlpsMissData.rds")
