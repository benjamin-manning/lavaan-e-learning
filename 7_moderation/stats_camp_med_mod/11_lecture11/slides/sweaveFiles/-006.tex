\begin{Schunk}
\begin{Sinput}
 ## Create product term:
 dat1$m2w <- dat1$m2 * dat1$w
 ##
 ## Specify model:
 mod4 <- "
 y ~ cp*x + b1*m1 + b2*m2 + b3*w + b4*m2w
 m2 ~ a2*x + d*m1
 m1 ~ a1*x
 
 ab1 := a1*b1
 imm2 := a2*b4
 fullImm := a1*d*b4
 "
 ##
 ## Fit model:
 out4 <- sem(mod4, data = dat1, se = "boot", boot = nBoot)
 summary(out4)
\end{Sinput}
\begin{Soutput}
lavaan (0.5-20) converged normally after  24 iterations

  Number of observations                           100

  Estimator                                         ML
  Minimum Function Test Statistic                1.655
  Degrees of freedom                                 4
  P-value (Chi-square)                           0.799

Parameter Estimates:

  Information                                 Observed
  Standard Errors                            Bootstrap
  Number of requested bootstrap draws             1000
  Number of successful bootstrap draws            1000

Regressions:
                   Estimate  Std.Err  Z-value  P(>|z|)
  y ~                                                 
    x         (cp)   -0.082    0.215   -0.383    0.701
    m1        (b1)    0.462    0.218    2.114    0.035
    m2        (b2)    0.822    0.165    4.998    0.000
    w         (b3)    0.656    0.196    3.355    0.001
    m2w       (b4)    0.627    0.113    5.545    0.000
  m2 ~                                                
    x         (a2)    0.035    0.130    0.271    0.787
    m1         (d)    1.262    0.097   13.079    0.000
  m1 ~                                                
    x         (a1)    0.741    0.135    5.503    0.000

Variances:
                   Estimate  Std.Err  Z-value  P(>|z|)
    y                 2.784    0.373    7.462    0.000
    m2                1.051    0.141    7.466    0.000
    m1                1.182    0.142    8.345    0.000

Defined Parameters:
                   Estimate  Std.Err  Z-value  P(>|z|)
    ab1               0.342    0.178    1.924    0.054
    imm2              0.022    0.083    0.266    0.790
    fullImm           0.587    0.170    3.449    0.001
\end{Soutput}
\end{Schunk}
